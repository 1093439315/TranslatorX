<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from git-scm.com/docs/git-sh-setup/2.9.1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Oct 2017 09:52:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  <meta charset='utf-8'>
  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>

  <title>Git - git-sh-setup Documentation</title>

  <link href='https://git-scm.com/favicon.ico' rel='shortcut icon' type='image/x-icon'>
  <link rel="alternate" href="https://git-scm.com/blog.rss" type="application/rss+xml" title="Git - Blog">

  <link rel="stylesheet" media="screen" href="../../assets/git-scm-e7baad50e93810401dcff271ffd82512.css" />
  <script src="../../assets/modernizr-0a2ce4076d64283b11c658f7ef3100c6.js"></script>
<script src="../../assets/modernizr-tests-73fae1efb92f6d477f2f589e95775709.js"></script>
  <!--[if (gte IE 6)&(lte IE 8)]>
  <script src="/javascripts/selectivizr-min.js"></script>
  <![endif]-->

  <script src="../../../use.typekit.com/jsq2fql.js" type="text/javascript"></script>
  <script>
    //<![CDATA[
      try{Typekit.load();}catch(e){}
    //]]>
  </script>

</head>

<body id="documentation">

  <div class="inner">
    <header>

  <a href="https://git-scm.com/"><img src="../../images/logo%402x.png" width="110" height="46" alt="Git" /></a>
  <span id="tagline"></span>
  <script type="text/javascript">
    var taglines = ["fast-version-control","everything-is-local","distributed-even-if-your-workflow-isnt","local-branching-on-the-cheap","distributed-is-the-new-centralized"];
    var tagline = taglines[Math.floor(Math.random() * taglines.length)];
    document.getElementById('tagline').innerHTML = '--' + tagline;
  </script>
  <form id="search" action="https://git-scm.com/search/results">
    <input id="search-text" name="search" placeholder="Search entire site..." autocomplete="off" type="text" />
  </form>
  <div id="search-results"></div>

</header>

  </div> <!-- .inner -->

    <div class="inner">
      <div id="content-wrapper">
        <aside class="sidebar">
  <nav>
    <ul>
      <li>
        <a href="https://git-scm.com/about">About</a>
      </li>
      <li>
        <a class="active" href="https://git-scm.com/doc">Documentation</a>
        <ul class="expanded">
          <li>
            <a href="https://git-scm.com/docs">Reference</a>
          </li>
          <li>
            <a href="https://git-scm.com/book">Book</a>
          </li>
          <li>
            <a href="https://git-scm.com/videos">Videos</a>
          </li>
          <li>
            <a href="https://git-scm.com/doc/ext">External Links</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/blog">Blog</a>
      </li>
      <li>
        <a href="https://git-scm.com/downloads">Downloads</a>
        <ul class="">
          <li>
            <a href="https://git-scm.com/downloads/guis">GUI Clients</a>
          </li>
          <li>
            <a href="https://git-scm.com/downloads/logos">Logos</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/community">Community</a>
      </li>
    </ul>
  </nav>
</aside>
        <div id="content">
          

  <div id='reference-version'>
    <a class="dropdown-trigger" id="reference-topics-trigger" data-panel-id="topics-dropdown" href="#">Topics ▾</a>
<div class='dropdown-panel right' id='topics-dropdown'>
  <div class='three-column'>
    <div class='column-left'>
      <h3 class='setup'>Setup and Config</h3>
<ul class='unstyled'>
  <li><a href="../git.html">git</a></li>
  <li><a href="../git-config.html">config</a></li>
  <li><a href="../git-help.html">help</a></li>
</ul>

      <h3 class='projects'>Getting and Creating Projects</h3>
<ul class='unstyled'>
  <li><a href="../git-init.html">init</a></li>
  <li><a href="../git-clone.html">clone</a></li>
</ul>

      <h3 class='snapshotting'>Basic Snapshotting</h3>
<ul class='unstyled'>
  <li><a href="../git-add.html">add</a></li>
  <li><a href="../git-status.html">status</a></li>
  <li><a href="../git-diff.html">diff</a></li>
  <li><a href="../git-commit.html">commit</a></li>
  <li><a href="../git-reset.html">reset</a></li>
  <li><a href="../git-rm.html">rm</a></li>
  <li><a href="../git-mv.html">mv</a></li>
</ul>

      <h3 class='branching'>Branching and Merging</h3>
<ul class='unstyled'>
  <li><a href="../git-branch.html">branch</a></li>
  <li><a href="../git-checkout.html">checkout</a></li>
  <li><a href="../git-merge.html">merge</a></li>
  <li><a href="../git-mergetool.html">mergetool</a></li>
  <li><a href="../git-log.html">log</a></li>
  <li><a href="../git-stash.html">stash</a></li>
  <li><a href="../git-tag.html">tag</a></li>
</ul>

      <h3 class='sharing'>Sharing and Updating Projects</h3>
<ul class='unstyled'>
  <li><a href="../git-fetch.html">fetch</a></li>
  <li><a href="../git-pull.html">pull</a></li>
  <li><a href="../git-push.html">push</a></li>
  <li><a href="../git-remote.html">remote</a></li>
  <li><a href="../git-submodule.html">submodule</a></li>
</ul>

    </div>
    <div class='column-middle'>
      <h3 class='inspection'>Inspection and Comparison</h3>
<ul class='unstyled'>
  <li><a href="../git-show.html">show</a></li>
  <li><a href="../git-log.html">log</a></li>
  <li><a href="../git-diff.html">diff</a></li>
  <li><a href="../git-shortlog.html">shortlog</a></li>
  <li><a href="../git-describe.html">describe</a></li>
</ul>

      <h3 class='patching'>Patching</h3>
<ul class='unstyled'>
  <li><a href="../git-apply.html">apply</a></li>
  <li><a href="../git-cherry-pick.html">cherry-pick</a></li>
  <li><a href="../git-diff.html">diff</a></li>
  <li><a href="../git-rebase.html">rebase</a></li>
  <li><a href="../git-revert.html">revert</a></li>
</ul>

      <h3 class='debugging'>Debugging</h3>
<ul class='unstyled'>
  <li><a href="../git-bisect.html">bisect</a></li>
  <li><a href="../git-blame.html">blame</a></li>
  <li><a href="../git-grep.html">grep</a></li>
</ul>

      <h3 class='email'>Email</h3>
<ul class='unstyled'>
  <li><a href="../git-am.html">am</a></li>
  <li><a href="../git-apply.html">apply</a></li>
  <li><a href="../git-format-patch.html">format-patch</a></li>
  <li><a href="../git-send-email.html">send-email</a></li>
  <li><a href="../git-request-pull.html">request-pull</a></li>
</ul>

      <h3 class='external'>External Systems</h3>
<ul class='unstyled'>
  <li><a href="../git-svn.html">svn</a></li>
  <li><a href="../git-fast-import.html">fast-import</a></li>
</ul>

      <h3 class='server-admin'>Server Admin</h3>
<ul class='unstyled'>
  <li><a href="../git-daemon.html">daemon</a></li>
  <li><a href="../git-update-server-info.html">update-server-info</a></li>
</ul>

    </div>
    <div class='column-right'>
      <h3 class='guides'>Guides</h3>
<ul class='unstyled'>
  <li><a href="../gitattributes.html">gitattributes</a></li>
  <li><a href="../giteveryday.html">Everyday Git</a></li>
  <li><a href="../gitglossary.html">Glossary</a></li>
  <li><a href="../gitignore.html">gitignore</a></li>
  <li><a href="../gitmodules.html">gitmodules</a></li>
  <li><a href="../gitrevisions.html">Revisions</a></li>
  <li><a href="../gittutorial.html">Tutorial</a></li>
  <li><a href="../gitworkflows.html">Workflows</a></li>
</ul>

      <h3 class='admin'>Administration</h3>
<ul class='unstyled'>
  <li><a href="../git-clean.html">clean</a></li>
  <li><a href="../git-gc.html">gc</a></li>
  <li><a href="../git-fsck.html">fsck</a></li>
  <li><a href="../git-reflog.html">reflog</a></li>
  <li><a href="../git-filter-branch.html">filter-branch</a></li>
  <li><a href="../git-instaweb.html">instaweb</a></li>
  <li><a href="../git-archive.html">archive</a></li>
  <li><a href="../git-bundle.html">bundle</a></li>
</ul>

      <h3 class='plumbing'>Plumbing Commands</h3>
<ul class='unstyled'>
  <li><a href="../git-cat-file.html">cat-file</a></li>
  <li><a href="../git-check-ignore.html">check-ignore</a></li>
  <li><a href="../git-commit-tree.html">commit-tree</a></li>
  <li><a href="../git-count-objects.html">count-objects</a></li>
  <li><a href="../git-diff-index.html">diff-index</a></li>
  <li><a href="../git-for-each-ref.html">for-each-ref</a></li>
  <li><a href="../git-hash-object.html">hash-object</a></li>
  <li><a href="../git-ls-files.html">ls-files</a></li>
  <li><a href="../git-merge-base.html">merge-base</a></li>
  <li><a href="../git-read-tree.html">read-tree</a></li>
  <li><a href="../git-rev-list.html">rev-list</a></li>
  <li><a href="../git-rev-parse.html">rev-parse</a></li>
  <li><a href="../git-show-ref.html">show-ref</a></li>
  <li><a href="../git-symbolic-ref.html">symbolic-ref</a></li>
  <li><a href="../git-update-index.html">update-index</a></li>
  <li><a href="../git-update-ref.html">update-ref</a></li>
  <li><a href="../git-verify-pack.html">verify-pack</a></li>
  <li><a href="../git-write-tree.html">write-tree</a></li>
</ul>

    </div>
  </div>
</div>

    <a class="dropdown-trigger" id="reference-versions-trigger" data-panel-id="previous-versions-dropdown" href="#">Version 2.14.2 ▾</a>
<span class="light">git-sh-setup last updated in 2.14.2</span>
<div class='dropdown-panel left' id='previous-versions-dropdown'>
  <header>Changes in the <strong>git-sh-setup</strong> manual</header>
  <ol class='reference-previous-versions'>
        <li class="no-change"><span>2.9.2 &rarr; 2.14.2 no changes</span></li>
        <li>
        <a href="2.9.html"><span class="version">2.9.1</span>
          <span class="diff">
              <img src="../../images/icons/green-dot.png" />
              <img src="../../images/icons/red-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
          </span>
          <em class="date">07/11/16</em>
        </a>
        </li>
    <li>&nbsp;</li>
    <!-- <li><a class="more" href="#">See more previous releases →</a></li> -->
  </ol>
  <footer>
    <span class="light">Check your version of git by running<br></span>
    <strong>$</strong>
    <input type="text" class="copyable" value="git --version" />
  </footer>
</div>

  </div>

  <div id='main'>
    <div class="sect1">
<h2 id="_name"><a class="anchor" href="#_name"></a>NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-sh-setup - Common Git shell script setup code</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis"><a class="anchor" href="#_synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>. "$(git --exec-path)/git-sh-setup"</em></pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description"><a class="anchor" href="#_description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is not a command the end user would want to run.  Ever.
This documentation is meant for people who are studying the
Porcelain-ish scripts and/or are writing new ones.</p>
</div>
<div class="paragraph">
<p>The <em>git sh-setup</em> scriptlet is designed to be sourced (using
<code>.</code>) by other shell scripts to set up some variables pointing at
the normal Git directories and a few helper shell functions.</p>
</div>
<div class="paragraph">
<p>Before sourcing it, your script should set up a few variables;
<code>USAGE</code> (and <code>LONG_USAGE</code>, if any) is used to define message
given by <code>usage()</code> shell function.  <code>SUBDIRECTORY_OK</code> can be set
if the script can run from a subdirectory of the working tree
(some commands do not).</p>
</div>
<div class="paragraph">
<p>The scriptlet sets <code>GIT_DIR</code> and <code>GIT_OBJECT_DIRECTORY</code> shell
variables, but does <strong>not</strong> export them to the environment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions"><a class="anchor" href="#_functions"></a>FUNCTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-sh-setup-die"> <a class="anchor" href="#git-sh-setup-die"></a>die </dt>
<dd>
<p>exit after emitting the supplied error message to the
standard error stream.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-usage"> <a class="anchor" href="#git-sh-setup-usage"></a>usage </dt>
<dd>
<p>die with the usage message.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-setreflogaction"> <a class="anchor" href="#git-sh-setup-setreflogaction"></a>set_reflog_action </dt>
<dd>
<p>Set <code>GIT_REFLOG_ACTION</code> environment to a given string (typically
the name of the program) unless it is already set.  Whenever
the script runs a <code>git</code> command that updates refs, a reflog
entry is created using the value of this string to leave the
record of what command updated the ref.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-giteditor"> <a class="anchor" href="#git-sh-setup-giteditor"></a>git_editor </dt>
<dd>
<p>runs an editor of user&#8217;s choice (GIT_EDITOR, core.editor, VISUAL or
EDITOR) on a given file, but error out if no editor is specified
and the terminal is dumb.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-isbarerepository"> <a class="anchor" href="#git-sh-setup-isbarerepository"></a>is_bare_repository </dt>
<dd>
<p>outputs <code>true</code> or <code>false</code> to the standard output stream
to indicate if the repository is a bare repository
(i.e. without an associated working tree).</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-cdtotoplevel"> <a class="anchor" href="#git-sh-setup-cdtotoplevel"></a>cd_to_toplevel </dt>
<dd>
<p>runs chdir to the toplevel of the working tree.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-requireworktree"> <a class="anchor" href="#git-sh-setup-requireworktree"></a>require_work_tree </dt>
<dd>
<p>checks if the current directory is within the working tree
of the repository, and otherwise dies.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-requireworktreeexists"> <a class="anchor" href="#git-sh-setup-requireworktreeexists"></a>require_work_tree_exists </dt>
<dd>
<p>checks if the working tree associated with the repository
exists, and otherwise dies.  Often done before calling
cd_to_toplevel, which is impossible to do if there is no
working tree.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-requirecleanworktreeltactiongtlthintgt"> <a class="anchor" href="#git-sh-setup-requirecleanworktreeltactiongtlthintgt"></a>require_clean_work_tree &lt;action&gt; [&lt;hint&gt;] </dt>
<dd>
<p>checks that the working tree and index associated with the
repository have no uncommitted changes to tracked files.
Otherwise it emits an error message of the form <code>Cannot
&lt;action&gt;: &lt;reason&gt;. &lt;hint&gt;</code>, and dies.  Example:</p>
<div class="listingblock">
<div class="content">
<pre>require_clean_work_tree rebase "Please commit or stash them."</pre>
</div>
</div>
</dd>
<dt class="hdlist1" id="git-sh-setup-getauthoridentfromcommit"> <a class="anchor" href="#git-sh-setup-getauthoridentfromcommit"></a>get_author_ident_from_commit </dt>
<dd>
<p>outputs code for use with eval to set the GIT_AUTHOR_NAME,
GIT_AUTHOR_EMAIL and GIT_AUTHOR_DATE variables for a given commit.</p>
</dd>
<dt class="hdlist1" id="git-sh-setup-createvirtualbase"> <a class="anchor" href="#git-sh-setup-createvirtualbase"></a>create_virtual_base </dt>
<dd>
<p>modifies the first file so only lines in common with the
second file remain. If there is insufficient common material,
then the first file is left empty. The result is suitable
as a virtual base input for a 3-way merge.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href='../git.html'>git[1]</a> suite</p>
</div>
</div>
</div>
  </div>

        </div>
      </div>
      <footer>
  <div class="site-source">
    This <a href="https://github.com/git/git-scm.com/blob/master/README.md#license">open sourced</a> site is <a href="https://github.com/git/git-scm.com">hosted on GitHub.</a><br>
    Patches, suggestions and comments are welcome.
  </div>
  <div class="sfc-member">
    Git is a member of <a href="https://git-scm.com/sfc">Software Freedom Conservancy</a>
  </div>
</footer>

<script src="../../assets/jquery-1.7.1.min-1e7a63d6feb237e04147914d7b3f8b05.js"></script>
<script src="../../assets/jquery-ui-1.8.18.custom.min-01c113ee6bd3a021d2aceb47c8807458.js"></script>
<script src="../../assets/jquery.defaultvalue-a3344e839433713d41ec7304ecdd6138.js"></script>
<script src="../../assets/session.min-bf0ddfe17e69417e50f0eb3b9c3e1214.js"></script>
<script src="../../assets/site-19b3bff50bab526421befb3d0b04eb62.js"></script>

    </div>

</body>

<!-- Mirrored from git-scm.com/docs/git-sh-setup/2.9.1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Oct 2017 09:52:27 GMT -->
</html>
