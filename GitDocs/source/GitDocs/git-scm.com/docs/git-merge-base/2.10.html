<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from git-scm.com/docs/git-merge-base/2.10.2 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Oct 2017 09:52:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  <meta charset='utf-8'>
  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>

  <title>Git - git-merge-base Documentation</title>

  <link href='https://git-scm.com/favicon.ico' rel='shortcut icon' type='image/x-icon'>
  <link rel="alternate" href="https://git-scm.com/blog.rss" type="application/rss+xml" title="Git - Blog">

  <link rel="stylesheet" media="screen" href="../../assets/git-scm-e7baad50e93810401dcff271ffd82512.css" />
  <script src="../../assets/modernizr-0a2ce4076d64283b11c658f7ef3100c6.js"></script>
<script src="../../assets/modernizr-tests-73fae1efb92f6d477f2f589e95775709.js"></script>
  <!--[if (gte IE 6)&(lte IE 8)]>
  <script src="/javascripts/selectivizr-min.js"></script>
  <![endif]-->

  <script src="../../../use.typekit.com/jsq2fql.js" type="text/javascript"></script>
  <script>
    //<![CDATA[
      try{Typekit.load();}catch(e){}
    //]]>
  </script>

</head>

<body id="documentation">

  <div class="inner">
    <header>

  <a href="https://git-scm.com/"><img src="../../images/logo%402x.png" width="110" height="46" alt="Git" /></a>
  <span id="tagline"></span>
  <script type="text/javascript">
    var taglines = ["fast-version-control","everything-is-local","distributed-even-if-your-workflow-isnt","local-branching-on-the-cheap","distributed-is-the-new-centralized"];
    var tagline = taglines[Math.floor(Math.random() * taglines.length)];
    document.getElementById('tagline').innerHTML = '--' + tagline;
  </script>
  <form id="search" action="https://git-scm.com/search/results">
    <input id="search-text" name="search" placeholder="Search entire site..." autocomplete="off" type="text" />
  </form>
  <div id="search-results"></div>

</header>

  </div> <!-- .inner -->

    <div class="inner">
      <div id="content-wrapper">
        <aside class="sidebar">
  <nav>
    <ul>
      <li>
        <a href="https://git-scm.com/about">About</a>
      </li>
      <li>
        <a class="active" href="https://git-scm.com/doc">Documentation</a>
        <ul class="expanded">
          <li>
            <a href="https://git-scm.com/docs">Reference</a>
          </li>
          <li>
            <a href="https://git-scm.com/book">Book</a>
          </li>
          <li>
            <a href="https://git-scm.com/videos">Videos</a>
          </li>
          <li>
            <a href="https://git-scm.com/doc/ext">External Links</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/blog">Blog</a>
      </li>
      <li>
        <a href="https://git-scm.com/downloads">Downloads</a>
        <ul class="">
          <li>
            <a href="https://git-scm.com/downloads/guis">GUI Clients</a>
          </li>
          <li>
            <a href="https://git-scm.com/downloads/logos">Logos</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/community">Community</a>
      </li>
    </ul>
  </nav>
</aside>
        <div id="content">
          

  <div id='reference-version'>
    <a class="dropdown-trigger" id="reference-topics-trigger" data-panel-id="topics-dropdown" href="#">Topics ▾</a>
<div class='dropdown-panel right' id='topics-dropdown'>
  <div class='three-column'>
    <div class='column-left'>
      <h3 class='setup'>Setup and Config</h3>
<ul class='unstyled'>
  <li><a href="../git.html">git</a></li>
  <li><a href="../git-config.html">config</a></li>
  <li><a href="../git-help.html">help</a></li>
</ul>

      <h3 class='projects'>Getting and Creating Projects</h3>
<ul class='unstyled'>
  <li><a href="../git-init.html">init</a></li>
  <li><a href="../git-clone.html">clone</a></li>
</ul>

      <h3 class='snapshotting'>Basic Snapshotting</h3>
<ul class='unstyled'>
  <li><a href="../git-add.html">add</a></li>
  <li><a href="../git-status.html">status</a></li>
  <li><a href="../git-diff.html">diff</a></li>
  <li><a href="../git-commit.html">commit</a></li>
  <li><a href="../git-reset.html">reset</a></li>
  <li><a href="../git-rm.html">rm</a></li>
  <li><a href="../git-mv.html">mv</a></li>
</ul>

      <h3 class='branching'>Branching and Merging</h3>
<ul class='unstyled'>
  <li><a href="../git-branch.html">branch</a></li>
  <li><a href="../git-checkout.html">checkout</a></li>
  <li><a href="../git-merge.html">merge</a></li>
  <li><a href="../git-mergetool.html">mergetool</a></li>
  <li><a href="../git-log.html">log</a></li>
  <li><a href="../git-stash.html">stash</a></li>
  <li><a href="../git-tag.html">tag</a></li>
</ul>

      <h3 class='sharing'>Sharing and Updating Projects</h3>
<ul class='unstyled'>
  <li><a href="../git-fetch.html">fetch</a></li>
  <li><a href="../git-pull.html">pull</a></li>
  <li><a href="../git-push.html">push</a></li>
  <li><a href="../git-remote.html">remote</a></li>
  <li><a href="../git-submodule.html">submodule</a></li>
</ul>

    </div>
    <div class='column-middle'>
      <h3 class='inspection'>Inspection and Comparison</h3>
<ul class='unstyled'>
  <li><a href="../git-show.html">show</a></li>
  <li><a href="../git-log.html">log</a></li>
  <li><a href="../git-diff.html">diff</a></li>
  <li><a href="../git-shortlog.html">shortlog</a></li>
  <li><a href="../git-describe.html">describe</a></li>
</ul>

      <h3 class='patching'>Patching</h3>
<ul class='unstyled'>
  <li><a href="../git-apply.html">apply</a></li>
  <li><a href="../git-cherry-pick.html">cherry-pick</a></li>
  <li><a href="../git-diff.html">diff</a></li>
  <li><a href="../git-rebase.html">rebase</a></li>
  <li><a href="../git-revert.html">revert</a></li>
</ul>

      <h3 class='debugging'>Debugging</h3>
<ul class='unstyled'>
  <li><a href="../git-bisect.html">bisect</a></li>
  <li><a href="../git-blame.html">blame</a></li>
  <li><a href="../git-grep.html">grep</a></li>
</ul>

      <h3 class='email'>Email</h3>
<ul class='unstyled'>
  <li><a href="../git-am.html">am</a></li>
  <li><a href="../git-apply.html">apply</a></li>
  <li><a href="../git-format-patch.html">format-patch</a></li>
  <li><a href="../git-send-email.html">send-email</a></li>
  <li><a href="../git-request-pull.html">request-pull</a></li>
</ul>

      <h3 class='external'>External Systems</h3>
<ul class='unstyled'>
  <li><a href="../git-svn.html">svn</a></li>
  <li><a href="../git-fast-import.html">fast-import</a></li>
</ul>

      <h3 class='server-admin'>Server Admin</h3>
<ul class='unstyled'>
  <li><a href="../git-daemon.html">daemon</a></li>
  <li><a href="../git-update-server-info.html">update-server-info</a></li>
</ul>

    </div>
    <div class='column-right'>
      <h3 class='guides'>Guides</h3>
<ul class='unstyled'>
  <li><a href="../gitattributes.html">gitattributes</a></li>
  <li><a href="../giteveryday.html">Everyday Git</a></li>
  <li><a href="../gitglossary.html">Glossary</a></li>
  <li><a href="../gitignore.html">gitignore</a></li>
  <li><a href="../gitmodules.html">gitmodules</a></li>
  <li><a href="../gitrevisions.html">Revisions</a></li>
  <li><a href="../gittutorial.html">Tutorial</a></li>
  <li><a href="../gitworkflows.html">Workflows</a></li>
</ul>

      <h3 class='admin'>Administration</h3>
<ul class='unstyled'>
  <li><a href="../git-clean.html">clean</a></li>
  <li><a href="../git-gc.html">gc</a></li>
  <li><a href="../git-fsck.html">fsck</a></li>
  <li><a href="../git-reflog.html">reflog</a></li>
  <li><a href="../git-filter-branch.html">filter-branch</a></li>
  <li><a href="../git-instaweb.html">instaweb</a></li>
  <li><a href="../git-archive.html">archive</a></li>
  <li><a href="../git-bundle.html">bundle</a></li>
</ul>

      <h3 class='plumbing'>Plumbing Commands</h3>
<ul class='unstyled'>
  <li><a href="../git-cat-file.html">cat-file</a></li>
  <li><a href="../git-check-ignore.html">check-ignore</a></li>
  <li><a href="../git-commit-tree.html">commit-tree</a></li>
  <li><a href="../git-count-objects.html">count-objects</a></li>
  <li><a href="../git-diff-index.html">diff-index</a></li>
  <li><a href="../git-for-each-ref.html">for-each-ref</a></li>
  <li><a href="../git-hash-object.html">hash-object</a></li>
  <li><a href="../git-ls-files.html">ls-files</a></li>
  <li><a href="../git-merge-base.html">merge-base</a></li>
  <li><a href="../git-read-tree.html">read-tree</a></li>
  <li><a href="../git-rev-list.html">rev-list</a></li>
  <li><a href="../git-rev-parse.html">rev-parse</a></li>
  <li><a href="../git-show-ref.html">show-ref</a></li>
  <li><a href="../git-symbolic-ref.html">symbolic-ref</a></li>
  <li><a href="../git-update-index.html">update-index</a></li>
  <li><a href="../git-update-ref.html">update-ref</a></li>
  <li><a href="../git-verify-pack.html">verify-pack</a></li>
  <li><a href="../git-write-tree.html">write-tree</a></li>
</ul>

    </div>
  </div>
</div>

    <a class="dropdown-trigger" id="reference-versions-trigger" data-panel-id="previous-versions-dropdown" href="#">Version 2.14.2 ▾</a>
<span class="light">git-merge-base last updated in 2.14.2</span>
<div class='dropdown-panel left' id='previous-versions-dropdown'>
  <header>Changes in the <strong>git-merge-base</strong> manual</header>
  <ol class='reference-previous-versions'>
        <li class="no-change"><span>2.10.3 &rarr; 2.14.2 no changes</span></li>
        <li>
        <a href="2.10.html"><span class="version">2.10.2</span>
          <span class="diff">
              <img src="../../images/icons/green-dot.png" />
              <img src="../../images/icons/green-dot.png" />
              <img src="../../images/icons/red-dot.png" />
              <img src="../../images/icons/red-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
              <img src="../../images/icons/grey-dot.png" />
          </span>
          <em class="date">10/28/16</em>
        </a>
        </li>
    <li>&nbsp;</li>
    <!-- <li><a class="more" href="#">See more previous releases →</a></li> -->
  </ol>
  <footer>
    <span class="light">Check your version of git by running<br></span>
    <strong>$</strong>
    <input type="text" class="copyable" value="git --version" />
  </footer>
</div>

  </div>

  <div id='main'>
    <div class="sect1">
<h2 id="_name"><a class="anchor" href="#_name"></a>NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-merge-base - Find as good common ancestors as possible for a merge</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis"><a class="anchor" href="#_synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git merge-base</em> [-a|--all] &lt;commit&gt; &lt;commit&gt;&#8230;&#8203;
<em>git merge-base</em> [-a|--all] --octopus &lt;commit&gt;&#8230;&#8203;
<em>git merge-base</em> --is-ancestor &lt;commit&gt; &lt;commit&gt;
<em>git merge-base</em> --independent &lt;commit&gt;&#8230;&#8203;
<em>git merge-base</em> --fork-point &lt;ref&gt; [&lt;commit&gt;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description"><a class="anchor" href="#_description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>git merge-base</em> finds best common ancestor(s) between two commits to use
in a three-way merge.  One common ancestor is <em>better</em> than another common
ancestor if the latter is an ancestor of the former.  A common ancestor
that does not have any better common ancestor is a <em>best common
ancestor</em>, i.e. a <em>merge base</em>.  Note that there can be more than one
merge base for a pair of commits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operation_modes"><a class="anchor" href="#_operation_modes"></a>OPERATION MODES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As the most common special case, specifying only two commits on the
command line means computing the merge base between the given two commits.</p>
</div>
<div class="paragraph">
<p>More generally, among the two commits to compute the merge base from,
one is specified by the first commit argument on the command line;
the other commit is a (possibly hypothetical) commit that is a merge
across all the remaining commits on the command line.</p>
</div>
<div class="paragraph">
<p>As a consequence, the <em>merge base</em> is not necessarily contained in each of the
commit arguments if more than two commits are specified. This is different
from <a href='../git-show-branch.html'>git-show-branch[1]</a> when used with the <code>--merge-base</code> option.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-merge-base---octopus"> <a class="anchor" href="#git-merge-base---octopus"></a>--octopus </dt>
<dd>
<p>Compute the best common ancestors of all supplied commits,
in preparation for an n-way merge.  This mimics the behavior
of <em>git show-branch --merge-base</em>.</p>
</dd>
<dt class="hdlist1" id="git-merge-base---independent"> <a class="anchor" href="#git-merge-base---independent"></a>--independent </dt>
<dd>
<p>Instead of printing merge bases, print a minimal subset of
the supplied commits with the same ancestors.  In other words,
among the commits given, list those which cannot be reached
from any other.  This mimics the behavior of <em>git show-branch
--independent</em>.</p>
</dd>
<dt class="hdlist1" id="git-merge-base---is-ancestor"> <a class="anchor" href="#git-merge-base---is-ancestor"></a>--is-ancestor </dt>
<dd>
<p>Check if the first &lt;commit&gt; is an ancestor of the second &lt;commit&gt;,
and exit with status 0 if true, or with status 1 if not.
Errors are signaled by a non-zero status that is not 1.</p>
</dd>
<dt class="hdlist1" id="git-merge-base---fork-point"> <a class="anchor" href="#git-merge-base---fork-point"></a>--fork-point </dt>
<dd>
<p>Find the point at which a branch (or any history that leads
to &lt;commit&gt;) forked from another branch (or any reference)
&lt;ref&gt;. This does not just look for the common ancestor of
the two commits, but also takes into account the reflog of
&lt;ref&gt; to see if the history leading to &lt;commit&gt; forked from
an earlier incarnation of the branch &lt;ref&gt; (see discussion
on this mode below).</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options"><a class="anchor" href="#_options"></a>OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-merge-base--a"> <a class="anchor" href="#git-merge-base--a"></a>-a </dt>
<dt class="hdlist1" id="git-merge-base---all"> <a class="anchor" href="#git-merge-base---all"></a>--all </dt>
<dd>
<p>Output all merge bases for the commits, instead of just one.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discussion"><a class="anchor" href="#_discussion"></a>DISCUSSION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Given two commits <em>A</em> and <em>B</em>, <code>git merge-base A B</code> will output a commit
which is reachable from both <em>A</em> and <em>B</em> through the parent relationship.</p>
</div>
<div class="paragraph">
<p>For example, with this topology:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>         o---o---o---B
        /
---o---1---o---o---o---A</pre>
</div>
</div>
<div class="paragraph">
<p>the merge base between <em>A</em> and <em>B</em> is <em>1</em>.</p>
</div>
<div class="paragraph">
<p>Given three commits <em>A</em>, <em>B</em> and <em>C</em>, <code>git merge-base A B C</code> will compute the
merge base between <em>A</em> and a hypothetical commit <em>M</em>, which is a merge
between <em>B</em> and <em>C</em>.  For example, with this topology:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>       o---o---o---o---C
      /
     /   o---o---o---B
    /   /
---2---1---o---o---o---A</pre>
</div>
</div>
<div class="paragraph">
<p>the result of <code>git merge-base A B C</code> is <em>1</em>.  This is because the
equivalent topology with a merge commit <em>M</em> between <em>B</em> and <em>C</em> is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>       o---o---o---o---o
      /                 \
     /   o---o---o---o---M
    /   /
---2---1---o---o---o---A</pre>
</div>
</div>
<div class="paragraph">
<p>and the result of <code>git merge-base A M</code> is <em>1</em>.  Commit <em>2</em> is also a
common ancestor between <em>A</em> and <em>M</em>, but <em>1</em> is a better common ancestor,
because <em>2</em> is an ancestor of <em>1</em>.  Hence, <em>2</em> is not a merge base.</p>
</div>
<div class="paragraph">
<p>The result of <code>git merge-base --octopus A B C</code> is <em>2</em>, because <em>2</em> is
the best common ancestor of all commits.</p>
</div>
<div class="paragraph">
<p>When the history involves criss-cross merges, there can be more than one
<em>best</em> common ancestor for two commits.  For example, with this topology:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>---1---o---A
    \ /
     X
    / \
---2---o---o---B</pre>
</div>
</div>
<div class="paragraph">
<p>both <em>1</em> and <em>2</em> are merge-bases of A and B.  Neither one is better than
the other (both are <em>best</em> merge bases).  When the <code>--all</code> option is not given,
it is unspecified which best one is output.</p>
</div>
<div class="paragraph">
<p>A common idiom to check "fast-forward-ness" between two commits A
and B is (or at least used to be) to compute the merge base between
A and B, and check if it is the same as A, in which case, A is an
ancestor of B.  You will see this idiom used often in older scripts.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>A=$(git rev-parse --verify A)
if test "$A" = "$(git merge-base A B)"
then
	... A is an ancestor of B ...
fi</pre>
</div>
</div>
<div class="paragraph">
<p>In modern git, you can say this in a more direct way:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>if git merge-base --is-ancestor A B
then
	... A is an ancestor of B ...
fi</pre>
</div>
</div>
<div class="paragraph">
<p>instead.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discussion_on_fork_point_mode"><a class="anchor" href="#_discussion_on_fork_point_mode"></a>Discussion on fork-point mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After working on the <code>topic</code> branch created with <code>git checkout -b
topic origin/master</code>, the history of remote-tracking branch
<code>origin/master</code> may have been rewound and rebuilt, leading to a
history of this shape:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>                 o---B1
                /
---o---o---B2--o---o---o---B (origin/master)
        \
         B3
          \
           Derived (topic)</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>origin/master</code> used to point at commits B3, B2, B1 and now it
points at B, and your <code>topic</code> branch was started on top of it back
when <code>origin/master</code> was at B3. This mode uses the reflog of
<code>origin/master</code> to find B3 as the fork point, so that the <code>topic</code>
can be rebased on top of the updated <code>origin/master</code> by:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ fork_point=$(git merge-base --fork-point origin/master topic)
$ git rebase --onto origin/master $fork_point topic</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also"><a class="anchor" href="#_see_also"></a>See also</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href='../git-rev-list.html'>git-rev-list[1]</a>,
<a href='../git-show-branch.html'>git-show-branch[1]</a>,
<a href='../git-merge.html'>git-merge[1]</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href='../git.html'>git[1]</a> suite</p>
</div>
</div>
</div>
  </div>

        </div>
      </div>
      <footer>
  <div class="site-source">
    This <a href="https://github.com/git/git-scm.com/blob/master/README.md#license">open sourced</a> site is <a href="https://github.com/git/git-scm.com">hosted on GitHub.</a><br>
    Patches, suggestions and comments are welcome.
  </div>
  <div class="sfc-member">
    Git is a member of <a href="https://git-scm.com/sfc">Software Freedom Conservancy</a>
  </div>
</footer>

<script src="../../assets/jquery-1.7.1.min-1e7a63d6feb237e04147914d7b3f8b05.js"></script>
<script src="../../assets/jquery-ui-1.8.18.custom.min-01c113ee6bd3a021d2aceb47c8807458.js"></script>
<script src="../../assets/jquery.defaultvalue-a3344e839433713d41ec7304ecdd6138.js"></script>
<script src="../../assets/session.min-bf0ddfe17e69417e50f0eb3b9c3e1214.js"></script>
<script src="../../assets/site-19b3bff50bab526421befb3d0b04eb62.js"></script>

    </div>

</body>

<!-- Mirrored from git-scm.com/docs/git-merge-base/2.10.2 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Oct 2017 09:52:20 GMT -->
</html>
